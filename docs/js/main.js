webpackJsonp([3],[function(t,e,i){var n,s,a;!function(r,o){s=[i(8),i(54),i(173),i(86)],n=o,a="function"==typeof n?n.apply(e,s):n,!(void 0!==a&&(t.exports=a))}(this,function(t,e,n,s){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}var r=a(t),o=a(e),l=a(n),c=a(s);r.default.use(o.default),r.default.use(c.default),r.default.config.debug=!0;var d=new o.default;d.map({"/taskList":{component:function(t){i.e(2,function(e){var i=[e(174)];t.apply(null,i)}.bind(this))}},"/taskListTwo":{component:function(t){i.e(1,function(e){var i=[e(175)];t.apply(null,i)}.bind(this))}}}),d.beforeEach(function(){window.scrollTo(0,0)}),d.afterEach(function(t){}),d.redirect({"*":"/taskListTwo"}),d.start(l.default,"#app")})},,,,,,,,,,,,,,,function(t,e,i){var n,s,a;!function(r,o){s=[e,i(8)],n=o,a="function"==typeof n?n.apply(e,s):n,!(void 0!==a&&(t.exports=a))}(this,function(e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=n(i),a=new s.default;e.default=a,t.exports=e.default})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,i){var n,s,a,s,a;!function(r,o){s=[t,e,i(26)],n=o,a="function"==typeof n?n.apply(e,s):n,!(void 0!==a&&(t.exports=a))}(this,function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r=n(i);!function(){var i={};i.install=function(t){t.directive("drag-and-drop",{params:["drag-and-drop","drag-start","drag","drag-over","drag-enter","drag-leave","drag-end","drop","draggable","droppable"],bind:function(){this.vm._dragSrcEl=null,void 0===this.params.draggable&&(this.params.draggable=!0),void 0===this.params.droppable&&(this.params.droppable=!0);var t={true:!0,false:!1},e=t[this.params.draggable],i=t[this.params.droppable],n=function(){};this.handleDragStart=function(t){t.target.classList.add("dragging"),this.vm._dragSrcEl=t.target,t.dataTransfer.effectAllowed="move",t.dataTransfer.setData("text","*"),"function"==typeof this.vm[this.params.dragStart]&&this.vm[this.params.dragStart].call(this,t.target,t)}.bind(this),this.handleDragOver=function(t){return t.preventDefault&&t.preventDefault(),t.dataTransfer.dropEffect="move",t.target.classList.add("drag-over"),"function"==typeof this.vm[this.params.dragOver]&&this.vm[this.params.dragOver].call(this,t.target,t),!1}.bind(this),this.handleDragEnter=function(t){"function"==typeof this.vm[this.params.dragEnter]&&this.vm[this.params.dragEnter].call(this,t.target,t),t.target.classList.add("drag-enter")}.bind(this),this.handleDragLeave=function(t){"function"==typeof this.vm[this.params.dragLeave]&&this.vm[this.params.dragLeave].call(this,t.target,t),t.target.classList.remove("drag-enter")}.bind(this),this.handleDrag=function(t){"function"==typeof this.vm[this.params.drag]&&this.vm[this.params.drag].call(this,t.target,t)}.bind(this),this.handleDragEnd=function(t){t.target.classList.remove("dragging","drag-over","drag-enter"),"function"==typeof this.vm[this.params.dragEnd]&&this.vm[this.params.dragEnd].call(this,t.target,t)}.bind(this),this.handleDrop=function(t){if(t.preventDefault(),t.stopPropagation&&t.stopPropagation(),this.vm._dragSrcEl!=t.target&&"function"==typeof this.vm[this.params.drop]){var i=t.target.draggable||e?t.target:t.target.parentElement;this.vm[this.params.drop].call(this,this.vm._dragSrcEl,i,t)}return!1}.bind(this),e||(this.handleDragStart=n,this.handleDragEnter=n,this.handleDrag=n,this.handleDragLeave=n,this.handleDragEnd=n),i||(this.handleDrop=n),e&&this.el.setAttribute("draggable","true"),this.el.addEventListener("dragstart",this.handleDragStart,!1),this.el.addEventListener("dragenter",this.handleDragEnter,!1),this.el.addEventListener("dragover",this.handleDragOver,!1),this.el.addEventListener("drag",this.handleDrag,!1),this.el.addEventListener("dragleave",this.handleDragLeave,!1),this.el.addEventListener("dragend",this.handleDragEnd,!1),this.el.addEventListener("drop",this.handleDrop,!1)},update:function(t,e){},unbind:function(){this.el.classList.remove("dragging","drag-over","drag-enter"),this.el.removeAttribute("draggable"),this.el.removeEventListener("dragstart",this.handleDragStart),this.el.removeEventListener("dragenter",this.handleDragEnter),this.el.removeEventListener("dragover",this.handleDragOver),this.el.removeEventListener("dragleave",this.handleDragLeave),this.el.removeEventListener("drag",this.handleDrag)}})},"object"==("undefined"==typeof e?"undefined":(0,r.default)(e))?t.exports=i:(s=[],a=function(){return i}.apply(e,s),!(void 0!==a&&(t.exports=a)))}()})},,function(t,e,i){var n,s,a;!function(i,r){s=[e],n=r,a="function"==typeof n?n.apply(e,s):n,!(void 0!==a&&(t.exports=a))}(this,function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={bind:function(){var t=this,e=(new Date).getTime();this.documentHandler=function(i){return!t.el.contains(i.target)&&void(t.expression&&(new Date).getTime()-e>200&&(t.vm[t.expression](),e=Date.now()))},document.addEventListener("click",this.documentHandler)},update:function(){},unbind:function(){document.removeEventListener("click",this.documentHandler)}},t.exports=e.default})},,,,,,,,,,,,,,,,,,,,,function(t,e,i){var n,s,a;!function(i,r){s=[e],n=r,a="function"==typeof n?n.apply(e,s):n,!(void 0!==a&&(t.exports=a))}(this,function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{}},ready:function(){},beforeDestroy:function(){},methods:{}},t.exports=e.default})},,,function(t,e,i){var n,s,a;!function(r,o){s=[e,i(8),i(15),i(55)],n=o,a="function"==typeof n?n.apply(e,s):n,!(void 0!==a&&(t.exports=a))}(this,function(e,i,n,s){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=a(i),o=a(n),l=a(s);e.default={name:"charge",props:{members:{},listItem:{},mainid:{}},directives:{clickoutside:l.default},data:function(){return{nickNameList:[],memberSelected:"",showItems:[],searchValue:"",searchListShow:!1,selectedItem:this.listItem}},ready:function(){this.showItems=this.members},computed:{nickname:function(){var t=this.selectedItem,e=this.members.find(function(e){return t.leader_uid===e.user_id});return e?e.nickname:""}},methods:{changeOff:function(){this.searchListShow=!1,this.$els.drop.display="none"},dropdownShow:function(){this.searchListShow=!0;var t=0,e=0,i=this.$els.drop;i.style.display="block";var n=this.$els.showname,s=n.getBoundingClientRect().top,a=n.getBoundingClientRect().left,r=n.clientHeight,o=i.clientHeight,l=i.clientWidth;window.innerHeight?t=window.innerHeight:document.body&&document.body.clientHeight&&(t=document.body.clientHeight),window.innerWidth?e=window.innerWidth:document.body&&document.body.clientWidth&&(e=document.body.clientWidth),t-s-r<o&&s-30>o?i.style.top=s-o+"px":i.style.top=s+r+"px",e-a<l?i.style.left=e-l-18+"px":a<l?i.style.left="10px":i.style.left=a+"px"},selectThis:function(t){console.log("ssss",t),r.default.set(t,"leader_uid",t.user_id),this.selectedItem=t,this.changeOff(),o.default.$emit("charge-change_"+this.mainid,this.listItem,t)}},watch:{searchValue:function(){if(this.members){for(var t=[],e=0;e<this.members.length;e++)this.members[e].nickname.indexOf(this.searchValue)===-1&&(this.members[e].mobile+"").indexOf(this.searchValue)===-1||t.push(this.members[e]);this.showItems=t}},searchListShow:function(){this.searchValue=""},members:function(){this.showItems=this.members}}},t.exports=e.default})},function(t,e,i){var n,s,a;!function(r,o){s=[e,i(15)],n=o,a="function"==typeof n?n.apply(e,s):n,!(void 0!==a&&(t.exports=a))}(this,function(e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=n(i);e.default={name:"charge",props:{members:{},mainid:{}},data:function(){return{showItems:[],searchValue:""}},ready:function(){this.showItems=this.members},methods:{selectThis:function(t){this.searchValue="",s.default.$emit("charge-change_"+this.mainid,t)}},watch:{searchValue:function(){if(this.members){for(var t=[],e=0;e<this.members.length;e++)this.members[e].nickname.indexOf(this.searchValue)===-1&&(this.members[e].mobile+"").indexOf(this.searchValue)===-1||t.push(this.members[e]);this.showItems=t}},members:function(){this.showItems=this.members}}},t.exports=e.default})},function(t,e,i){var n,s,a;!function(i,r){s=[e],n=r,a="function"==typeof n?n.apply(e,s):n,!(void 0!==a&&(t.exports=a))}(this,function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"checkBox",props:["isCheck"]},t.exports=e.default})},function(t,e,i){var n,s,a;!function(r,o){s=[e,i(8),i(15),i(178),i(176),i(53)],n=o,a="function"==typeof n?n.apply(e,s):n,!(void 0!==a&&(t.exports=a))}(this,function(e,i,n,s,a,r){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var l=o(i),c=o(n),d=o(s),u=o(a),h=o(r);l.default.use(h.default),e.default={name:"menu",components:{checkBox:d.default,charge:u.default},props:{task:{},members:{},selectItem:{},fatherId:{},islabel:{},mainid:{},isol:{},isTitleChange:{}},data:function(){return{preTitle:""}},computed:{tasks:function(){function t(e){for(var i=0;i<e.length;i++)e[i].children&&!e[i].isOpen&&(l.default.set(e[i],"isOpen",!1),t(e[i].children))}return t(this.task),this.task}},methods:{checkChange:function(t){c.default.$emit("check-change_"+this.mainid,t)},selectNewItem:function(t,e){c.default.$emit("select-item_"+this.mainid,t,e+"")},titleChange:function(t,e){t.task_name!==this.preTitle&&c.default.$emit("title-change_"+this.mainid,t,t.task_name,e)},handleDrop:function(t,e){this.loggedEvent="handleDrop",c.default.$emit("drag-change_"+this.mainid,t.id,e.id)},savePreTitle:function(t){this.preTitle=t},openThis:function(t){t.isOpen=!t.isOpen}},watch:{},filters:{totime:function(t){var e,i,n,s,a,r;return e=t-(new Date).getTime(),e>=0?(i=Math.floor(e/1e3/60/60/24),n=Math.floor(e/1e3/60/60%24),s=Math.floor(e/1e3/60%60),a=Math.floor(e/1e3%60),r=i+"天"+n+"小时"):(i=Math.ceil(e/1e3/60/60/24),n=Math.ceil(e/1e3/60/60%24),s=Math.ceil(e/1e3/60%60),a=Math.ceil(e/1e3%60),r="超期"+-i+"天"+-n+"小时"),r}}},t.exports=e.default})},function(t,e,i){var n,s,a;!function(r,o){s=[e,i(15),i(179)],n=o,a="function"==typeof n?n.apply(e,s):n,!(void 0!==a&&(t.exports=a))}(this,function(e,i,n){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=s(i),r=s(n);e.default={name:"taskList",components:{menu:r.default},props:{task:{},selectItem:{},members:{},selectId:{},islabel:{default:!1},mainid:{},isol:{},isTitleChange:{}},methods:{},ready:function(){var t=this;a.default.$on("select-item_"+t.mainid,function(e,i){t.$emit("select-item_"+t.mainid,t.task,e,i)}),a.default.$on("check-change_"+t.mainid,function(e){t.$emit("check-change_"+t.mainid,t.task,e)}),a.default.$on("title-change_"+t.mainid,function(e,i,n){t.$emit("title-change_"+t.mainid,t.task,e,i)}),a.default.$on("charge-change_"+t.mainid,function(e,i){t.$emit("charge-change_"+t.mainid,t.task,e,i)}),a.default.$on("drag-change_"+t.mainid,function(e,i){t.$emit("drag-change_"+t.mainid,t.task,e,i)})}},t.exports=e.default})},function(t,e,i){var n,s,a;!function(r,o){s=[e,i(25),i(26),i(8),i(15),i(177),i(85),i(53),i(55),i(163)],n=o,a="function"==typeof n?n.apply(e,s):n,!(void 0!==a&&(t.exports=a))}(this,function(e,i,n,s,a,r,o,l,c,d){"use strict";function u(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var h=u(i),f=u(n),m=u(s),p=u(a),v=u(r),g=u(o),_=u(l),b=u(c);m.default.use(_.default),e.default={name:"taskListTwo",components:{chargeTwo:v.default},directives:{clickoutside:b.default},props:{task:{},timeStamp:{},members:{},selectItem:{},islabel:{},mainid:{},isol:{},isTitleChange:{},listId:{}},data:function(){return{visibleData:[],itemsHeight:30,searchListShow:!1,selectXY:{left:0,top:0},preTitle:"",mergedData:[],mergedDataCopy:[],halfTask:0,start:0,end:10,lastInput:""}},filters:{totime:function(t){var e,i,n,s,a,r;return e=t-(new Date).getTime(),e>=0?(i=Math.floor(e/1e3/60/60/24),n=Math.floor(e/1e3/60/60%24),s=Math.floor(e/1e3/60%60),a=Math.floor(e/1e3%60),r=i+"天"+n+"小时"):(i=Math.ceil(e/1e3/60/60/24),n=Math.ceil(e/1e3/60/60%24),s=Math.ceil(e/1e3/60%60),a=Math.ceil(e/1e3%60),r="超期 "+-i+"天"+-n+"小时"),r},toNickName:function(t){var e=this.members.find(function(e){return!(!e.user_id||e.user_id!=t)});return e?e.nickname:"请选择"}},computed:{contentHeight:function(){return this.mergedData.length*this.itemsHeight}},watch:{task:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(){void 0===task&&(task=[]),console.log("tasklistv2task更改成功"),this.mergeData(),this.$emit("loaded-change_"+this.mainid)})},methods:{deepCopy:function(t){var e=Array.isArray(t)?[]:{};for(var i in t)t.hasOwnProperty(i)&&("object"===(0,f.default)(t[i])&&null!==t[i]?e[i]=this.deepCopy(t[i]):e[i]=t[i]);return e},mergeData:function(){var t=this.task,e=[],i=[];if(this.timeStamp){console.log("tasklistv2数据合并"),e=g.default.get("hex_"+this.listId);for(var n=function(i){a=e.filter(function(n,s){return t[i]._id==n._id&&(t[i].removed>0?e.splice(s,1):e.splice(s,1,t[i]),!0)}),a&&a.length||e.push(t[i])},s=0;s<t.length;s++){var a;n(s)}for(var s=0;s<e.length;s++)e[s].isShow=!0;i=e}else{console.log("tasklistv2数据覆盖");for(var r=0;r<t.length;r++)t[r].isShow=!0;i=t}this.mergedDataCopy=this.deepCopy(i),this.taskListSortControl(),console.log("tasklistv2数据合并覆盖成功"),this.setMemory()},setMemory:function(){var t=this;g.default.set("hex_"+this.listId,this.mergedData),console.log("tasklistv2存入缓存"),g.default.set("hex_"+this.listId,this.mergedData)||(console.log("tasklistv2缓存已经满了，请重新加载"),this.$emit("memory-out_"+t.mainid,"hex_"+this.listId,this.mergedData));var e=g.default.get("taskSlist");if(e){if(e.indexOf(this.listId)==-1)if(e.length<5)e.push(this.listId),g.default.set("taskSlist",e),console.log("tasklistv2更新缓存字典成功");else{var i=e[0];e.push(this.listId),e.shift(),g.default.remove("hex_"+i),g.default.set("taskSlist",e),console.log("tasklistv2替换缓存字典成功")}}else g.default.set("taskSlist",[this.listId]),console.log("tasklistv2创建缓存字典成功")},taskListSortControl:function(t,e){var i=this;this.mergedData=this.taskListSort(this.mergedDataCopy,t,e),t&&this.$els.tasklisttwo.scrollTo(0,1),m.default.nextTick(function(){i.updateVisibleData()})},taskListSort:function(t,e,i){var n=this,s=[],a=n.deepCopy(t)||[];switch("done"==i?a=t.filter(function(t,e){return!!t.finish_time}):"undone"==i&&(a=t.filter(function(t,e){return!t.finish_time})),this.islabel=!1,this.isol=!1,e){case"create_uid":a=this.sortData(a,"create_uid"),s=this.sortDataNickName(a,"create_uid","创建人以移除");break;case"complete_uid":a=this.sortData(a,"complete_uid"),s=this.sortDataNickName(a,"complete_uid","没有完成人的任务");break;case"leader_uid":a=this.sortData(a,"leader_uid"),s=this.sortDataNickName(a,"leader_uid","没有负责人的任务");break;case"create_time":a=this.sortData(a,"create_time"),s=this.sortDataTime(a,"create_time","没有创建日期的任务");break;case"deadline":a=this.sortData(a,"deadline"),s=this.sortDataTime(a,"deadline","没有截止日期的任务");break;case"finish_time":a=this.sortData(a,"finish_time"),s=this.sortDataTime(a,"finish_time","没有完成日期的任务");break;case"status":a=this.sortData(a,"create_time");var r=[{type:"label",text:"完成的任务",num:""}],o=[{type:"label",text:"未完成的任务",num:""}];a.forEach(function(t,e){t.finish_time?r.push(t):o.push(t)}),r[0].num="（"+(r.length-1)+"）个",o[0].num="（"+(o.length-1)+"）个",o.length>1?s=s.concat(o):null,r.length>1?s=s.concat(r):null;break;case"priority":a=this.sortData(a,"create_time");var l=[{type:"label",text:"优先级:普通",num:"",priority:1}],c=[{type:"label",text:"优先级:重要",num:"",priority:2}],d=[{type:"label",text:"优先级:紧急",num:"",priority:3}],u=[{type:"label",text:"优先级:重要紧急",num:"",priority:4}];a.forEach(function(t,e){switch(t.priority){case 1:l.push(t);break;case 2:c.push(t);break;case 3:d.push(t);break;default:u.push(t)}}),l[0].num="（"+(l.length-1)+"）个",c[0].num="（"+(c.length-1)+"）个",d[0].num="（"+(d.length-1)+"）个",u[0].num="（"+(u.length-1)+"）个",u.length>1?s=s.concat(u):null,d.length>1?s=s.concat(d):null,c.length>1?s=s.concat(c):null,l.length>1?s=s.concat(l):null;break;default:this.islabel=!0,this.isol=!0;var h=function t(e,i,a,r){var o=e.filter(function(t){return t[i]&&a._id?t[i]+""==a._id+"":t[i]===a._id});return o.length?(a.hasChildren=!0,a.isOpen=!0,n.sortData(o,"create_time").reverse().map(function(n,a){n.positionInd=r+"."+(a+1),s.push(n),t(e,i,n,n.positionInd)}),a.children=o):a.hasChildren=!1,s},f=a.filter(function(t){return!t.father_id});f=this.sortData(f,"create_time").reverse(),f.forEach(function(t,e){t.positionInd=e+1,s.push(t),h(a,"father_id",t,e+1)});for(var m=0;m<s.length;m++)s[m].ind=m+1}return s},sortData:function(t,e){var i=".";"create_time"!=e&&"deadline"!=e&&"finish_time"!=e||(i=0);for(var n=0;n<t.length;n++){t[n][e]||(t[n][e]=i);for(var s=n+1;s<t.length;s++){t[s][e]||(t[s][e]=i);var a={};t[n][e]<t[s][e]&&(a=t[s],t[s]=t[n],t[n]=a)}}return t},sortDataNickName:function(t,e,i){var n=this,s={},a=[];return t.forEach(function(t){var i=n.members.find(function(i){return i.user_id==t[e]});i?m.default.set(t,"nickname",i.nickname):m.default.set(t,"nickname","."),s[t.nickname]?s[t.nickname].push(t):m.default.set(s,t.nickname,[t])}),(0,h.default)(s).forEach(function(t){var e=t;e&&"."!=e||(e=i);var n=[{type:"label",text:e,num:"（"+s[t].length+"）个"}];a=a.concat(n),a=a.concat(s[t])}),a},sortDataTime:function(t,e,i){var n=this,s=[],a=[];return t.forEach(function(t){t[e]?m.default.set(t,"time",n.sortToTime(t[e])):m.default.set(t,"time","."),a[t.time]?a[t.time].push(t):m.default.set(a,t.time,[t])}),(0,h.default)(a).forEach(function(t){var e=t;e&&"."!=e||(e=i);var n=[{type:"label",text:e,num:"（"+a[t].length+"）个"}];s=s.concat(n),s=s.concat(a[t])}),s},sortToTime:function(t){return new Date(t).toJSON().substr(0,10)},handleScroll:function(){var t=event.target.scrollTop||0;this.updateVisibleData(t)},updateVisibleData:function(t){t=t||this.$els.tasklisttwo.scrollTop||0;var e=Math.ceil(this.$els.tasklisttwo.offsetHeight/this.itemsHeight);this.halfTask=Math.floor(this.$els.tasklisttwo.offsetHeight/this.itemsHeight/2),this.start=Math.floor(t/this.itemsHeight),this.end=this.start+e;for(var i=this.start;i<this.end;i++)this.mergedData[i]&&this.mergedData[i].isShow===!1&&this.end++;this.visibleData=this.mergedData.slice(this.start,this.end),this.visibleData=this.visibleData.filter(function(t){return"label"===t.type||t.isShow}),this.$els.content.style.webkitTransform="translateY("+this.start*this.itemsHeight+"px)"},changeGetItem:function(t,e,i){var n=this,s=0,a=this.mergedData.filter(function(a,r){if(a._id==t)return t&&e&&(m.default.set(a,e,i),n.mergedDataCopy.find(function(n){return n._id==t?m.default.set(n,e,i):null})),s=r,!0});return 1!==a.length&&console.log("tasklistv2一共找到了"+a.length+"条相同id的数据，请确认数据是否正确,如果是添加任务请无视"),a&&1==a.length?[a[0],s,this.mergedData]:void 0},changeGetChildrenItem:function(t,e,i){var n=this,s=this,a=[];return t||(t=void 0),function t(e){if(void 0===e)a=s.mergedData;else{var i=s.mergedData.filter(function(t){return!(!t.father_id||t.father_id!=e)});i.length&&i.map(function(e){a.push(e),t(e._id)})}return a}(t),e&&a.forEach(function(t){m.default.set(t,e,i),n.mergedDataCopy.find(function(n){return n._id==t._id?m.default.set(n,e,i):null})}),a},selectId:function(t){this.changeGetItem(t)?this.selectThis(this.changeGetItem(t)[0]):null},scrollTo:function(t){var e=this.changeGetItem(t);if(e){var i=0;i=e[1]-this.halfTask<0?0:e[1]-this.halfTask,this.$els.tasklisttwo.scrollTo(0,i*this.itemsHeight)}},addTask:function(t){var e=this;this.changeGetItem(t._id)?console.log("tasklistv2重复id"):(t.isShow=!0,this.mergedDataCopy.push(t),e.taskListSortControl(),m.default.nextTick(function(){e.changeGetItem(t._id)[1]<e.start||e.changeGetItem(t._id)[1]>=e.end-1?e.scrollTo(t._id):null,e.selectThis(t)}))},delTask:function(t){var e=this,i=t,n="",s=[],a={},r=this;if(i||(i=this.selectItem._id),this.changeGetItem(i)){n=this.changeGetItem(i)[0].father_id||void 0;var o=this.mergedData.filter(function(t,e){return t.father_id==n});o.length>1?o.filter(function(t,e){t._id==i&&(a=0==e?o[1]:o[e-1])}):this.changeGetItem(n)?a=this.changeGetItem(n)[0]:(a={},console.log("tasklistv2没有找到同级或者父级任务"))}s=this.changeGetChildrenItem(i),this.mergedDataCopy.filter(function(t,n){t._id==i&&e.mergedDataCopy.splice(n,1)}),s.forEach(function(t){e.mergedDataCopy.filter(function(i,n){i._id==t._id&&e.mergedDataCopy.splice(n,1)})}),this.taskListSortControl(),this.selectThis(a),this.mergedDataCopy&&this.mergedDataCopy.length&&(r.changeGetItem(a._id)[1]<r.start||r.changeGetItem(a._id)[1]>=r.end-1?r.scrollTo(a._id):null)},filterValue:function(t){var e=this.mergedData.filter(function(e){if(e.task_name&&e.task_name.indexOf(t)!==-1)return!0});return e},selectThis:function(t){var e=this;if(e.lastInput){var i=document.getElementById("c"+e.lastInput+"_input");i?i.blur():null}this.selectItem=t,e.lastInput=t._id,m.default.nextTick(function(){(0,d.setTimeout)(function(){var e=document.getElementById("c"+t._id+"_input");e?e.focus():null},200)}),this.$emit("select-item_"+e.mainid,this.mergedData,t)},changeDone:function(t){var e=this;t.finish_time?this.changeGetItem(t._id,"finish_time",null):this.changeGetItem(t._id,"finish_time",(new Date).getTime()),this.$emit("check-change_"+e.mainid,this.mergedData,t)},savePreTitle:function(t){this.preTitle=t},changeTitle:function(t){var e=this;t.task_name!==this.preTitle&&(this.changeGetItem(t._id,"task_name",t.task_name),this.$emit("title-change_"+e.mainid,this.mergedData,t))},changeLeader:function(t){var e=event.path[0],i=this.$els.dropdown;i.style.visibility="visible",i.style.display="block",this.searchListShow=!0;var n=e.getBoundingClientRect().top,s=e.getBoundingClientRect().left,a=e.offsetWidth,r=e.offsetHeight,o=i.offsetWidth,l=i.offsetHeight,c=document.documentElement.clientWidth,d=document.documentElement.clientHeight,u=0,h=0;u=s+a/2-o/2,h=n+r+10,u<0?u=0:null,h<0?h=0:null,u>c-o?u=c-o:null,h>d-l?h=d-l:null,m.default.set(this.selectXY,"left",u+"px"),m.default.set(this.selectXY,"top",h+"px")},changeOff:function(){event.path[0].className.indexOf("leader")==-1&&(this.searchListShow=!1)},showSwitch:function(t){if(t.hasChildren){m.default.set(t,"isOpen",!t.isOpen);for(var e=0;e<t.children.length;e++)this.isShowChildren(t.children,t.isOpen);this.$els.tasklisttwo.scrollTo(0,this.start*this.itemsHeight),this.updateVisibleData()}},isShowChildren:function(t,e){for(var i=0;i<t.length;i++)t[i].isShow=e,t[i].hasChildren&&this.isShowChildren(t[i].children,e)}},created:function(){},ready:function(){var t=this;m.default.nextTick(function(){t.mergeData(),t.$emit("loaded-change_"+t.mainid)}),p.default.$on("charge-change_"+t.mainid,function(e){t.changeGetItem(t.selectItem._id,"leader_uid",e.user_id),t.searchListShow=!1,t.$emit("charge-change_"+t.mainid,t.selectItem,e)})}},t.exports=e.default})},function(t,e,i){var n,s,a;!function(r,o){s=[t,i(32)],n=o,a="function"==typeof n?n.apply(e,s):n,!(void 0!==a&&(t.exports=a))}(this,function(t,e){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function n(t){var e=!1;if(t)if(t.code)switch(t.code){case 22:e=!0;break;case 1014:"NS_ERROR_DOM_QUOTA_REACHED"===t.name&&(e=!0)}else t.number===-2147024882&&(e=!0);return e}var s=i(e);t.exports={get:function(t){var e=window.localStorage.getItem(t);return JSON.parse(e)},set:function(t,e){try{return window.localStorage.setItem(t,(0,s.default)(e)),!0}catch(t){if(n(t))return!1}},remove:function(t){var e=window.localStorage.getItem(t);return window.localStorage.removeItem(t),e},clear:function(){window.localStorage.clear()}}})},function(t,e,i){var n,s,a;!function(r,o){s=[t,i(87),i(25),i(180),i(181)],n=o,a="function"==typeof n?n.apply(e,s):n,!(void 0!==a&&(t.exports=a))}(this,function(t,e,i,n,s){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}var r=a(e),o=a(i),l=a(n),c=a(s),d={taskList:l.default,taskListTwo:c.default},u=function(t){(0,o.default)(d).forEach(function(e){t.component(d[e].name||e,d[e])})};"undefined"!=typeof window&&window.Vue&&u(window.Vue),t.exports=(0,r.default)(d,{install:u}),Array.prototype.insert=function(t,e){this.splice(t,0,e)}})},function(t,e,i){t.exports={default:i(98),__esModule:!0}},,,,,,,,,,,function(t,e,i){i(136),t.exports=i(1).Object.assign},,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,i){"use strict";var n=i(5),s=i(21),a=i(41),r=i(29),o=i(24),l=i(38),c=Object.assign;t.exports=!c||i(12)(function(){var t={},e={},i=Symbol(),n="abcdefghijklmnopqrst";return t[i]=7,n.split("").forEach(function(t){e[t]=t}),7!=c({},t)[i]||Object.keys(c({},e)).join("")!=n})?function(t,e){for(var i=o(t),c=arguments.length,d=1,u=a.f,h=r.f;c>d;)for(var f,m=l(arguments[d++]),p=u?s(m).concat(u(m)):s(m),v=p.length,g=0;v>g;)f=p[g++],n&&!h.call(m,f)||(i[f]=m[f]);return i}:c},,,,,,,,,function(t,e,i){var n=i(3);n(n.S+n.F,"Object",{assign:i(127)})},,,,,,,,,,,,,,,,,,,function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){function i(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function s(t){if(d===setTimeout)return setTimeout(t,0);if((d===i||!d)&&setTimeout)return d=setTimeout,setTimeout(t,0);try{return d(t,0)}catch(e){try{return d.call(null,t,0)}catch(e){return d.call(this,t,0)}}}function a(t){if(u===clearTimeout)return clearTimeout(t);if((u===n||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(t);try{return u(t)}catch(e){try{return u.call(null,t)}catch(e){return u.call(this,t)}}}function r(){p&&f&&(p=!1,f.length?m=f.concat(m):v=-1,m.length&&o())}function o(){if(!p){var t=s(r);p=!0;for(var e=m.length;e;){for(f=m,m=[];++v<e;)f&&f[v].run();v=-1,e=m.length}f=null,p=!1,a(t)}}function l(t,e){this.fun=t,this.array=e}function c(){}var d,u,h=t.exports={};!function(){try{d="function"==typeof setTimeout?setTimeout:i}catch(t){d=i}try{u="function"==typeof clearTimeout?clearTimeout:n}catch(t){u=n}}();var f,m=[],p=!1,v=-1;h.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];m.push(new l(t,e)),1!==m.length||p||s(o)},l.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=c,h.addListener=c,h.once=c,h.off=c,h.removeListener=c,h.removeAllListeners=c,h.emit=c,h.prependListener=c,h.prependOnceListener=c,h.listeners=function(t){return[]},h.binding=function(t){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(t){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(t,e,i){(function(t,e){!function(t,i){"use strict";function n(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),i=0;i<e.length;i++)e[i]=arguments[i+1];var n={callback:t,args:e};return p[m]=n,f(m),m++}function s(t){delete p[t]}function a(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(i,n)}}function r(t){if(v)setTimeout(r,0,t);else{var e=p[t];if(e){v=!0;try{a(e)}finally{s(t),v=!1}}}}function o(){f=function(t){e.nextTick(function(){r(t)})}}function l(){if(t.postMessage&&!t.importScripts){var e=!0,i=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=i,e}}function c(){var e="setImmediate$"+Math.random()+"$",i=function(i){i.source===t&&"string"==typeof i.data&&0===i.data.indexOf(e)&&r(+i.data.slice(e.length))};t.addEventListener?t.addEventListener("message",i,!1):t.attachEvent("onmessage",i),f=function(i){t.postMessage(e+i,"*")}}function d(){var t=new MessageChannel;t.port1.onmessage=function(t){var e=t.data;r(e)},f=function(e){t.port2.postMessage(e)}}function u(){var t=g.documentElement;f=function(e){var i=g.createElement("script");i.onreadystatechange=function(){r(e),i.onreadystatechange=null,t.removeChild(i),i=null},t.appendChild(i)}}function h(){f=function(t){setTimeout(r,0,t)}}if(!t.setImmediate){var f,m=1,p={},v=!1,g=t.document,_=Object.getPrototypeOf&&Object.getPrototypeOf(t);_=_&&_.setTimeout?_:t,"[object process]"==={}.toString.call(t.process)?o():l()?c():t.MessageChannel?d():g&&"onreadystatechange"in g.createElement("script")?u():h(),_.setImmediate=n,_.clearImmediate=s}}("undefined"==typeof self?"undefined"==typeof t?this:t:self)}).call(e,function(){return this}(),i(161))},function(t,e,i){(function(t){function n(t,e){this._id=t,this._clearFn=e}var s="undefined"!=typeof t&&t||"undefined"!=typeof self&&self||window,a=Function.prototype.apply;e.setTimeout=function(){return new n(a.call(setTimeout,s,arguments),clearTimeout)},e.setInterval=function(){return new n(a.call(setInterval,s,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},n.prototype.unref=n.prototype.ref=function(){},n.prototype.close=function(){this._clearFn.call(s,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},i(162),e.setImmediate="undefined"!=typeof self&&self.setImmediate||"undefined"!=typeof t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||"undefined"!=typeof t&&t.clearImmediate||this&&this.clearImmediate}).call(e,function(){return this}())},function(t,e){t.exports=" <div> <router-view></router-view> </div> "},,,function(t,e){t.exports=' <div class=task-list-two v-el:tasklisttwo="" @scroll=handleScroll _v-52e1b1a6=""> <div :style="{height: contentHeight + \'px\'}" _v-52e1b1a6=""> <ul class=task-list-two-wrap v-el:content="" _v-52e1b1a6=""> <li v-for="(index , listItem) in visibleData" track-by=$index class=list-item :class="{\'done\':listItem.finish_time,\'selected\':selectItem._id==listItem._id&amp;&amp;listItem.type!==\'label\'}" :id="\'c\'+listItem._id" :key=index @click=selectThis(listItem) v-show="typeof listItem.show === \'undefined\' || listItem.isShow" _v-52e1b1a6=""> <div v-if="listItem.type==\'label\'" class=label _v-52e1b1a6=""> <div _v-52e1b1a6="">{{listItem.text}}</div> <div v-if=listItem.priority class=priority :class="{\'wary\':listItem.priority==2,\'warning\':listItem.priority ==3,\'error\':listItem.priority==4}" _v-52e1b1a6="">★</div> <div _v-52e1b1a6="">{{listItem.num}}</div> </div> <template v-if="listItem.type!==\'label\'"> <div class=itemIndex v-if=isol _v-52e1b1a6="">{{listItem.ind}}</div> <div class=checkbox @click=changeDone(listItem) _v-52e1b1a6=""></div> <div class=rank v-if=islabel :style="{\'text-indent\':listItem.positionInd&amp;&amp;listItem.positionInd.length?listItem.positionInd.split(\'.\').length*0.8+\'rem\':\'.5rem\'}" _v-52e1b1a6="">{{listItem.positionInd}}</div> <div :class="{\'open\': listItem.isOpen, \'close\': !listItem.isOpen}" v-show=listItem.hasChildren @click=showSwitch(listItem) _v-52e1b1a6=""></div> <div class=title _v-52e1b1a6=""> <input type=text v-model=listItem.task_name :readonly=!isTitleChange :id="\'c\'+listItem._id+\'_input\'" @focus=savePreTitle(listItem.task_name) @blur=changeTitle(listItem) placeholder=任务名称 v-el:taskname="" _v-52e1b1a6=""> </div> <div class=right _v-52e1b1a6=""> <div class=time v-if="!listItem.finish_time &amp;&amp; listItem.deadline" :class="{\'over\':listItem.deadline<new Date().getTime()}" _v-52e1b1a6="">{{listItem.deadline|totime}}</div> <div class=priority :class="{\'wary\':listItem.priority==2,\'warning\':listItem.priority ==3,\'error\':listItem.priority==4}" _v-52e1b1a6="">★</div> <div class=leader @click=changeLeader(listItem) _v-52e1b1a6="">{{listItem.leader_uid|toNickName}}</div> </div> </template> </li> </ul> <charge-two v-el:dropdown="" v-show=searchListShow class=dropDown :style=selectXY :members=members :mainid=mainid v-clickoutside=changeOff _v-52e1b1a6=""></charge-two> </div> </div> '},function(t,e){
t.exports=' <template v-for="(listInd,listItem) in tasks"> <div v-if="listItem.type==&quot;label1&quot;" class=label1 _v-64517a11="">{{listItem.text}}</div> <div v-if="listItem.type==&quot;label2&quot;" class=label2 _v-64517a11="">{{listItem.text}}</div> <div v-if="listItem.type==&quot;label3&quot;" class=label3 _v-64517a11="">{{listItem.text}}</div> <li v-if="listItem.type==&quot;task&quot;" class=item :key=listInd :id=listItem._id v-drag-and-drop="" drop=handleDrop @click=selectNewItem(listItem,fatherId?fatherId+&quot;.&quot;+(listInd+1):listInd+1) :class="{&quot;active&quot;:selectItem==listItem,&quot;done&quot;:listItem.finish_time?true:false,&quot;ulList&quot;:!isol}" _v-64517a11=""> <div class=itemWrap _v-64517a11=""> <div class=left _v-64517a11=""> <check-box class=checkboxs :is-check=listItem.finish_time @click=checkChange(listItem,fatherId?fatherId+&quot;.&quot;+(listInd+1):listInd+1) _v-64517a11=""></check-box> <div v-if=islabel style=visibility:hidden _v-64517a11="">{{fatherId}}</div> <div v-if=islabel class=inds _v-64517a11=""> {{fatherId?fatherId+"."+(listInd+1):listInd+1}} </div> <div class=open v-if="listItem.children&amp;&amp;listItem.children.length>0" @click=openThis(listItem) _v-64517a11="">{{listItem.isOpen?\'-\':\'+\'}}</div> <div class=title _v-64517a11=""> <div v-if=!isTitleChange _v-64517a11="">{{listItem.task_name}}</div> <input type=text v-if=isTitleChange v-model=listItem.task_name @focus=savePreTitle(listItem.task_name) @blur=titleChange(listItem,fatherId?fatherId+&quot;.&quot;+(listInd+1):listInd+1) _v-64517a11=""> </div> </div> <div class=right _v-64517a11=""> <div class=time v-show=" !listItem.finish_time &amp;&amp; listItem.deadline " :class="{&quot;over&quot;: listItem.deadline < new Date().getTime()}" _v-64517a11=""> {{listItem.deadline|totime}} </div> <div class=time v-show=" !listItem.finish_time &amp;&amp; !listItem.deadline " :class="{&quot;over&quot;: listItem.deadline < new Date().getTime()}" _v-64517a11=""> &nbsp; </div> <div class=time v-show=listItem.finish_time _v-64517a11=""> &nbsp; </div> <div class=urgency :class="{&quot;wary&quot;:listItem.priority==2,&quot;warning&quot;:listItem.priority==3,&quot;error&quot;:listItem.priority==4}" _v-64517a11="">★</div> <div class=charge _v-64517a11=""> <charge :members=members :list-item=listItem :mainid=mainid _v-64517a11=""></charge> </div> </div> </div> </li> <menu v-if="listItem.children&amp;&amp;listItem.children.length>0&amp;&amp;listItem.isOpen" :task=listItem.children :members=members :father-id=fatherId?fatherId+&quot;.&quot;+(listInd+1):listInd+1 :select-item=selectItem :islabel=islabel :mainid=mainid :isol=isol :is-title-change=isTitleChange _v-64517a11=""></menu> </template> '},function(t,e){t.exports=' <div _v-7a960056=""> <input type=checkbox class=isCheck :checked=isCheck _v-7a960056=""> </div> '},function(t,e){t.exports=' <div class=task-select v-clickoutside=changeOff _v-d5803134=""> <div class=showName @click=dropdownShow v-el:showname="" _v-d5803134="">{{ nickname ||\'请选择\'}}</div> <div class=dropdown v-show=searchListShow v-el:drop="" _v-d5803134=""> <div class=search _v-d5803134=""> <input type=text placeholder=搜索..... v-model=searchValue _v-d5803134=""> </div> <div class=searchList _v-d5803134=""> <div class=list-item-group _v-d5803134=""> <div class="list-item clearFix" v-for="(index,item) in showItems" :key=index @click=selectThis(item) _v-d5803134=""> <label _v-d5803134=""> <div class=nickname _v-d5803134="">{{item.nickname }}</div> <div class=mobile _v-d5803134="">{{item.mobile}}</div> </label> </div> <div class="list-item clearFix" v-if=!members _v-d5803134=""> <label _v-d5803134=""> <div _v-d5803134="">暂时没有负责人</div> </label> </div> </div> </div> </div> </div> '},function(t,e){t.exports=' <div class=task-select _v-e860fbc8=""> <div class=dropdown _v-e860fbc8=""> <div class=search _v-e860fbc8=""> <input type=text placeholder=搜索..... v-model=searchValue _v-e860fbc8=""> </div> <div class=searchList _v-e860fbc8=""> <div class=list-item-group _v-e860fbc8=""> <div class="list-item clearFix" v-for="(index,item) in showItems" :key=index @click=selectThis(item) _v-e860fbc8=""> <label _v-e860fbc8=""> <div class=nickname _v-e860fbc8="">{{item.nickname}}</div> <div class=mobile _v-e860fbc8="">{{item.mobile}}</div> </label> </div> <div class="list-item clearFix" v-if=!members _v-e860fbc8=""> <label _v-e860fbc8=""> <div _v-e860fbc8="">暂时没有负责人</div> </label> </div> </div> </div> </div> </div> '},function(t,e){t.exports=' <div class=taskListWrap _v-f0387816=""> <ol class=itemGroup type=1 _v-f0387816=""> <li v-if="!task||task.length==0" class=none _v-f0387816="">点击添加按钮，开始添加第一个项目</li> <menu :task=task :members=members :select-item=selectItem :islabel=islabel :mainid=mainid :isol=isol :is-title-change=isTitleChange _v-f0387816=""></menu> </ol> </div> '},function(t,e,i){var n,s,a={};n=i(76),s=i(164),t.exports=n||{},t.exports.__esModule&&(t.exports=t.exports.default);var r="function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports;s&&(r.template=s),r.computed||(r.computed={}),Object.keys(a).forEach(function(t){var e=a[t];r.computed[t]=function(){return e}})},,,function(t,e,i){var n,s,a={};i(158),n=i(79),s=i(170),t.exports=n||{},t.exports.__esModule&&(t.exports=t.exports.default);var r="function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports;s&&(r.template=s),r.computed||(r.computed={}),Object.keys(a).forEach(function(t){var e=a[t];r.computed[t]=function(){return e}})},function(t,e,i){var n,s,a={};i(159),n=i(80),s=i(171),t.exports=n||{},t.exports.__esModule&&(t.exports=t.exports.default);var r="function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports;s&&(r.template=s),r.computed||(r.computed={}),Object.keys(a).forEach(function(t){var e=a[t];r.computed[t]=function(){return e}})},function(t,e,i){var n,s,a={};i(157),n=i(81),s=i(169),t.exports=n||{},t.exports.__esModule&&(t.exports=t.exports.default);var r="function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports;s&&(r.template=s),r.computed||(r.computed={}),Object.keys(a).forEach(function(t){var e=a[t];r.computed[t]=function(){return e}})},function(t,e,i){var n,s,a={};i(156),n=i(82),s=i(168),t.exports=n||{},t.exports.__esModule&&(t.exports=t.exports.default);var r="function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports;s&&(r.template=s),r.computed||(r.computed={}),Object.keys(a).forEach(function(t){var e=a[t];r.computed[t]=function(){return e}})},function(t,e,i){var n,s,a={};i(160),n=i(83),s=i(172),t.exports=n||{},t.exports.__esModule&&(t.exports=t.exports.default);var r="function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports;s&&(r.template=s),r.computed||(r.computed={}),Object.keys(a).forEach(function(t){var e=a[t];r.computed[t]=function(){return e}})},function(t,e,i){var n,s,a={};i(155),n=i(84),s=i(167),t.exports=n||{},t.exports.__esModule&&(t.exports=t.exports.default);var r="function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports;s&&(r.template=s),r.computed||(r.computed={}),Object.keys(a).forEach(function(t){var e=a[t];r.computed[t]=function(){return e}})}]);